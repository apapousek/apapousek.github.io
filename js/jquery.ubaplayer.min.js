/*! UbaPlayer - v1.0.2 -  * https://github.com/brianhadaway/UbaPlayer
 * Copyright (c)  2014  Brian Hadaway; Licensed MIT */!function(a){var b,c,d,e,f,g={audioButtonClass:"audioButton",autoPlay:null,codecs:[{name:"OGG",codec:'audio/ogg; codecs="vorbis"'},{name:"MP3",codec:"audio/mpeg"}],continuous:!1,extension:null,flashAudioPlayerPath:"swf/player.swf",flashExtension:".mp3",flashObjectID:"audioPlayer",loadingClass:"loading",loop:!1,playerContainer:"player",playingClass:"playing",swfobjectPath:"js/swfobject.js",volume:.5,fallbackFunctions:{play:null,pause:null,resume:null,error:null},fallbackExtension:".mp3"},h=!1,i=!1,j=!1,k={play:function(a){e=a,b=l.getFileNameWithoutExtension(e.attr("href")),h=!0,e.addClass(g.loadingClass),d.removeClass(g.playingClass),j?"function"==typeof g.fallbackFunctions.play&&g.fallbackFunctions.play(b+g.fallbackExtension):i?(c&&l.removeListeners(window),c=document.getElementById(g.flashObjectID),l.addListeners(window),c.playFlash(b+g.extension)):(c&&(c.pause(),l.removeListeners(c)),c=new Audio(""),l.addListeners(c),c.id="audio",c.loop=g.loop?"loop":"",c.volume=g.volume,c.src=b+g.extension,c.play())},pause:function(){j?"function"==typeof g.fallbackFunctions.pause&&g.fallbackFunctions.pause():i?c.pauseFlash():c.pause(),e.removeClass(g.playingClass),h=!1},resume:function(){j?"function"==typeof g.fallbackFunctions.resume&&g.fallbackFunctions.resume():i?c.playFlash():c.play(),e.addClass(g.playingClass),h=!0},playing:function(){return h}},l={init:function(b){var c;a.extend(g,b),f=this,a(".controls").bind("click",function(a){return l.updateTrackState(a),!1}),d=a("."+g.audioButtonClass),c=g.codecs;for(var e=0,h=c.length;h>e;e++){var j=c[e];if(l.canPlay(j)){g.extension=[".",j.name.toLowerCase()].join("");break}}(!g.extension||i)&&(i=!0,g.extension=g.flashExtension),i?(f.html("<div id='"+g.playerContainer+"'/>"),a.getScript(g.swfobjectPath,function(){swfobject.embedSWF(g.flashAudioPlayerPath,g.playerContainer,"0","0","9.0.0","swf/expressInstall.swf",!1,!1,{id:g.flashObjectID},l.swfLoaded)})):g.autoPlay&&k.play(g.autoPlay)},updateTrackState:function(d){e=a(d.target),e.hasClass("audioButton")&&(!c||c&&b!==l.getFileNameWithoutExtension(e.attr("href"))?k.play(e):h?k.pause():k.resume())},addListeners:function(b){a(b).bind({canplay:l.onLoaded,error:l.onError,ended:l.onEnded})},removeListeners:function(b){a(b).unbind({canplay:l.onLoaded,error:l.onError,ended:l.onEnded})},onLoaded:function(){d.removeClass(g.loadingClass),e.addClass(g.playingClass),c.play()},onError:function(){d.removeClass(g.loadingClass),i?l.removeListeners(window):l.removeListeners(c)},onEnded:function(){if(h=!1,e.removeClass(g.playingClass),b="",i?l.removeListeners(window):l.removeListeners(c),g.continuous){var d=e.next().length?e.next():a(g.audioButtonClass).eq(0);k.play(d)}},canPlay:function(a){return document.createElement("audio").canPlayType?document.createElement("audio").canPlayType(a.codec).match(/maybe|probably/i)?!0:!1:!1},swfLoaded:function(a){a.success||(i=!1,j=!0,"function"==typeof g.fallbackFunctions.error&&g.fallbackFunctions.error()),g.autoPlay&&setTimeout(function(){k.play(g.autoPlay)},500)},getFileNameWithoutExtension:function(a){var b=a.split(".");return b.pop(),b.join(".")}};a.fn.ubaPlayer=function(b){return k[b]?k[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jquery.ubaPlayer"),void 0):l.init.apply(this,arguments)}}(jQuery);